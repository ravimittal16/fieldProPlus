<ion-view title="{{vm.barCodeData.barcodeDetails.barcodeName}}" cache-view="false" hide-back-button="true" align-title="center"
  view-title="{{vm.barCodeData.barcodeDetails.barcodeName}}">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content scroll="false">
    <div class="list padding-top" data-ng-if="vm.errors.length > 0">
      <div class="error">
        <ui class="list-unstyled">
          <li data-ng-repeat="error in vm.errors">{{::error}}</li>
        </ui>
      </div>
    </div>
    <ion-tabs class="tabs-dark tabs-icon-top">
      <ion-tab title="DESCRIPTION" icon-on="ion-ios-paper" icon-off="ion-ios-paper-outline">
        <ion-content>
          <ion-refresher pulling-text="Pull to refresh..." on-refresh="vm.tabs.desc.events.refreshOnPullDown()">
          </ion-refresher>
          <div>
            <div class="padding-top">
              <div class="card">
                <div class="list">
                  <div class="item item-divider header-dark">
                    SERVICE ADDRESS
                  </div>
                  <div class="item">
                    <span class="label label-success">{{::vm.barCodeData.barcodeDetails.barcodeName}}</span>
                    <div class="padding-top">
                      <h2 class="n-m-b">{{::vm.barCodeData.barcodeDetails.displayName}}</h2>
                      <address>
                        <p>
                          <strong>{{::vm.barCodeData.barcodeDetails.company_Name}}</strong>
                        </p>
                        <p>{{::vm.barCodeData.barcodeDetails.shipStreet}}</p>
                        <p>{{::vm.barCodeData.barcodeDetails.shipCity}},{{::vm.barCodeData.barcodeDetails.shipState}}&nbsp;{{::vm.barCodeData.barcodeDetails.shipZIP}}
                        </p>
                        <p ng-if="vm.barCodeData.barcodeDetails.phone">
                          <span>
                            <i class="icon ion-android-call"></i>&nbsp;
                            <a href="tel:{{::vm.barCodeData.barcodeDetails.phone}}">{{::vm.barCodeData.barcodeDetails.phone}}</a>
                          </span>
                        </p>
                        <p data-ng-if="vm.barCodeData.barcodeDetails.contactInfo">Contact Info :
                          <span>{{::vm.barCodeData.barcodeDetails.contactInfo}}</span>
                        </p>
                        <button class="button button-block button-small button-positive" data-ng-click="vm.tabs.desc.events.onAddressTapped()">
                          <i class="ion ion-ios-location"></i>&nbsp;Show on Google Map
                        </button>
                      </address>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="item item-divider header-dark">
                  ORDER INFO
                </div>
                <div class="padding">
                  <p data-ng-if="vm.barCodeData.barcodeDetails.excptns">
                    <h5>
                      <strong class="text-muted">Job Type</strong>
                      <span class="pull-right">{{::vm.barCodeData.barcodeDetails.excptns}}</span>
                    </h5>
                  </p>
                  <p data-ng-if="vm.barCodeData.barcodeDetails.priority">
                    <h5>
                      <strong class="text-muted">Priority</strong>
                      <span class="pull-right">{{::vm.barCodeData.barcodeDetails.priority}}</span>
                    </h5>
                  </p>
                  <p data-ng-if="vm.barCodeData.barcodeDetails.classId">
                    <h5>
                      <strong class="text-muted">Class</strong>
                      <span class="pull-right">{{::vm.barCodeData.barcodeDetails.class_Name}}</span>
                    </h5>
                  </p>
                  <!-- <p data-ng-if="vm.barCodeData.barcodeDetails.poNum">
                    <h5>
                      <strong class="text-muted">PO Number</strong>
                      <span class="pull-right">{{::vm.barCodeData.barcodeDetails.poNum}}</span>
                    </h5>
                  </p> -->
                </div>
              </div>
              <div class="card">
                <div class="list">
                  <label class="item item-input">
                    <span class="input-label" ng-bind="vm.poHeading"></span>
                    <input type="text" maxlength="50" ng-model="vm.barCodeData.barcodeDetails.poNum" ng-model-options="{debounce:500}" ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()">
                  </label>
                  <label class="item item-input">
                    <span class="input-label" ng-bind="vm.uiSettings.customField2Label"></span>
                    <input type="text" maxlength="50" ng-model="vm.barCodeData.barcodeDetails.customType2Val" ng-model-options="{debounce:500}"
                      ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()">
                  </label>
                  <label class="item item-input">
                    <span class="input-label" ng-bind="vm.uiSettings.customField3Label"></span>
                    <input type="text" maxlength="50" ng-model="vm.barCodeData.barcodeDetails.customType3Val" ng-model-options="{debounce:500}"
                      ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()">
                  </label>
                </div>
              </div>
              <div class="card">
                <div class="item item-divider header-dark">
                  WORK DESCRIPTION
                  <a class="icon ion-ios-browsers-outline pull-right pointer" data-ng-click="vm.tabs.events.popoutTextBox('DESCRIPTION')"></a>
                </div>
                <div class="list">
                  <div class="item item-input">
                    <textarea cols="30" rows="10" data-ng-model="vm.barCodeData.barcodeDetails.comment_1" data-ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()"
                      data-ng-model-options="{debounce:500}" placeholder="enter work description here..."></textarea>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="item item-divider header-dark">
                  RESOLUTION
                  <div class="pull-right">
                    <a class="icon ion-refresh pointer" data-ng-click="vm.tabs.desc.events.reloadWorkResolution()"></a>
                    <a class="icon ion-ios-browsers-outline pointer" data-ng-click="vm.tabs.events.popoutTextBox('RESOLUTION')"></a>
                  </div>
                </div>
                <div class="list">
                  <div class="item item-input">
                    <textarea cols="30" rows="10" data-ng-model="vm.barCodeData.barcodeDetails.comment_2" data-ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()"
                      data-ng-model-options="{debounce:500}" placeholder="enter work resolution here..."></textarea>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="item item-divider header-dark">
                  COMMENTS
                  <div class="pull-right">
                    <a class="icon ion-ios-browsers-outline pointer" data-ng-click="vm.tabs.events.popoutTextBox('COMMENTS')"></a>
                  </div>
                </div>
                <div class="list">
                  <div class="item item-input">
                    <textarea cols="30" rows="10" data-ng-model="vm.barCodeData.barcodeDetails.comment_4" data-ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()"
                      data-ng-model-options="{debounce:500}" placeholder="enter comments here..."></textarea>
                  </div>
                </div>
              </div>
            </div>
            <div>
            </div>
          </div>
        </ion-content>
      </ion-tab>
      <ion-tab title="SCHEDULE" icon-on="ion-ios-clock" icon-off="ion-ios-clock-outline">
        <ion-content>
          <div class="card">
            <div class="item item-divider header-dark">
              SCHEDULE START AND END
            </div>
            <div class="item item-text-wrap">
              <p class="n-m-b">
                <strong>Schedule Start</strong>
              </p>
              <p>{{vm.schedule.scheduledStartDateTime | date:'MM/dd/yyyy hh:mm a'}}</p>
              <p class="n-m-b">
                <strong>Schedule End</strong>
              </p>
              <p>{{vm.schedule.scheduledFinishDateTime | date:'MM/dd/yyyy hh:mm a'}}</p>
            </div>
          </div>
          <div class="card">
            <div class="item item-divider header-dark">
              ACTUAL SCHEDULE START AND END
              <!--<a class="button pull-right button-small button-icon icon ion-android-more-vertical button-small item-divider-left-buttion white"
                ng-if="vm.uiSettings.billingOption == 0" data-ng-click="vm.tabs.sch.events.onScheduleActionButtonClicked()"></a>-->
            </div>
            <div class="row" data-ng-if="vm.schedule.approve">
              <div class="col">
                <div class="alert alert-info">
                  <span>This schedule has been approved and cannot be edited.</span>
                </div>
              </div>
            </div>
            <div class="col" data-ng-if="vm.uiSettings.timerEnabled && vm.uiSettings.billingOption == 0">
              <work-order-timer-component data-is-checked-in="vm.schedule.checkInStatus" data-is-checked-out="vm.schedule.checkOutStatus"
                data-schedule="vm.schedule"></work-order-timer-component>
            </div>
            <div class="list" ng-if="vm.uiSettings.billingOption == 0">
              <div>
                <div class="item item-input item-stacked-label" style="border-bottom: 0px !important;">
                  <span class="input-label">Actual Start Time</span>
                </div>
                <div class="item" style="border-top:0px !important;padding-top: 0px !important;">
                  <div style="width: 65%;float: left;">
                    <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background" data-mobiscroll-datetime="{display: 'bottom', dateFormat: 'mm/dd/yy', timeFormat: 'hh:ii A',onSelect:vm.scheduleTimeSpan.onStartDateTimeChaged}"
                      data-ng-model="vm.schedule.actualStartDateTime" placeholder="tap here to select..." />
                    <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background" disabled data-ng-model="vm.schedule.actualStartDateTimeString"
                    />
                  </div>
                  <div style="width: 35%;float: left;">
                    <button class="button button-small button-assertive" data-ng-disabled="vm.schedule.approve" data-ng-click="vm.tabs.sch.events.clearAllDateTimeSelection(true)">
                      <i class="icon ion-ios-trash-outline"></i>
                    </button>
                    <button type="button" class="button button-small button-positive" data-ng-disabled="vm.schedule.approve || vm.schedule.checkInStatus"
                      data-ng-click="vm.tabs.sch.events.checkIn()">
                      <i class="ion ion-clock"></i>&nbsp;Check In
                    </button>
                  </div>
                </div>
                <div class="item item-input item-stacked-label" style="border-bottom: 0px !important;">
                  <span class="input-label">Actual Finish Time</span>
                </div>
                <div class="item" style="border-top:0px !important;padding-top: 0px !important;">
                  <div style="width: 65%;float: left;">
                    <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background" data-mobiscroll-datetime="{display: 'bottom', dateFormat: 'mm/dd/yy', timeFormat: 'hh:ii A',onSelect:vm.scheduleTimeSpan.onEndDateTimeChanged}"
                      data-ng-model="vm.schedule.actualFinishDateTime" placeholder="tap here to select..." />
                    <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background" disabled data-ng-model="vm.schedule.actualFinishDateTimeString"
                    />
                  </div>
                  <div style="width: 35%;float: left;">
                    <button class="button button-small button-assertive" data-ng-disabled="vm.schedule.approve" data-ng-click="vm.tabs.sch.events.clearAllDateTimeSelection(false)">
                      <i class="icon ion-ios-trash-outline"></i>
                    </button>
                    <button type="button" class="button button-small button-positive" data-ng-disabled="vm.schedule.approve || vm.schedule.checkOutStatus"
                      data-ng-click="vm.tabs.sch.events.checkOut()">
                      <i class="ion ion-clock"></i>&nbsp;Check Out
                    </button>
                  </div>
                </div>
                <label class="item item-input">
                  <span class="input-label">Total Time</span>
                  <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background text-right" placeholder="Total Time" data-mobiscroll-timespan="{display: 'bottom',preset:'timespan',wheelOrder: 'hhii',onSelect:vm.scheduleTimeSpan.onTimespanSeletionChanged}"
                    data-ng-model="vm.scheduleTimeSpan.timeSpan" />
                  <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background text-right" disabled placeholder="Total Time"
                    data-ng-model="vm.scheduleTimeSpan.timeSpan" />
                </label>
                <label class="item item-input">
                  <textarea name="" id="" rows="6" placeholder="enter trip note here..." data-ng-model="vm.schedule.tripNote" data-ng-change="vm.tabs.sch.events.onTripnoteChanged()"
                    data-ng-model-options="{debounce:500}"></textarea>
                </label>
                <div class="padding" data-ng-if="vm.uiSettings.isTimeCardModuleEnabled">
                  <button class="button button-block button-small button-dark" data-ng-click="vm.tabs.sch.events.pushToTimecard()">
                    <i class="ion ion-clock"></i>&nbsp;Push to Timecard
                  </button>
                </div>
              </div>
              <div ng-if="vm.uiSettings.billingOption == 0 && vm.uiSettings.isRouteTimeOptionChecked">
                <div class="item item-divider tem-bg-gray">
                  In Route Details
                </div>
                <div class="item item-input item-stacked-label">
                  <span class="input-label">In Route Start</span>
                  <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background" data-mobiscroll-datetime="{display: 'bottom', dateFormat: 'mm/dd/yy', timeFormat: 'hh:ii A',onSelect:vm.scheduleTimeSpan.onInRouteTImeChanged}"
                    data-ng-model="vm.schedule.inRouteStartTime" />
                  <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background" disabled data-ng-model="vm.schedule.inRouteStartTime"
                  />
                </div>
                <div class="item item-input item-stacked-label">
                  <span class="input-label">In Route End</span>
                  <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background" data-mobiscroll-datetime="{display: 'bottom', dateFormat: 'mm/dd/yy', timeFormat: 'hh:ii A',onSelect:vm.scheduleTimeSpan.onInRouteTImeChanged}"
                    data-ng-model="vm.schedule.inRouteEndTime" />
                  <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background" disabled data-ng-model="vm.schedule.inRouteEndTime"
                  />
                </div>
                <label class="item item-input">
                  <span class="input-label">Total Time</span>
                  <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background text-right" placeholder="Total Time" data-mobiscroll-timespan="{display: 'bottom',preset:'timespan',wheelOrder: 'hhii',onSelect:vm.scheduleTimeSpan.onInRouteTimespanChanged}"
                    data-ng-model="vm.scheduleTimeSpan.inRouteTimeSpan" />
                  <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background text-right" disabled placeholder="Total Time"
                    data-ng-model="vm.scheduleTimeSpan.inRouteTimeSpan" />
                </label>
              </div>

            </div>
            <div class="list" ng-if="vm.uiSettings.billingOption == 1">
              <label class="item item-input">
                <span class="input-label">Actual Start Date</span>
                <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background text-right" data-mobiscroll-date="{display: 'bottom', dateFormat: 'mm/dd/yy'}"
                  data-ng-model="vm.schedule.actualStartDateTime" data-ng-change="vm.scheduleTimeSpan.onStartDateTimeChaged()"
                />
                <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background text-right" disabled data-ng-model="vm.schedule.actualStartDateTime"
                />
              </label>

              <label class="item item-input" data-ng-repeat="cs in ::vm.schedule.customSchedules">
                <span class="input-label">{{::cs.fieldGivenName}}</span>
                <input type="text" data-ng-if="!vm.schedule.approve" class="transparent-background text-right" data-mobiscroll-numpad="{display: 'bottom',min:0,scale: 2,max:99999.99,preset:'decimal'}"
                  data-ng-model="cs.totalHours" data-ng-change="vm.tabs.sch.events.onCustomScheduleChanged(cs)" />
                <input type="text" data-ng-if="vm.schedule.approve" class="transparent-background text-right" disabled data-ng-model="cs.totalHours"
                />
              </label>


              <label class="item item-input">
                <textarea name="" id="" rows="6" placeholder="enter trip note here..." data-ng-model="vm.schedule.tripNote" data-ng-change="vm.tabs.sch.events.onTripnoteChanged()"
                  data-ng-model-options="{debounce:500}"></textarea>
              </label>
            </div>
          </div>
          <div class="card" data-ng-if="vm.uiSettings.milageTrackingEnabled">
            <div class="item item-divider header-dark">
              MILAGE
              <!--<a class="button pull-right button-small button-icon icon ion-android-more-vertical button-small item-divider-left-buttion"
                data-ng-click="vm.tabs.sch.events.onMilageInformationActionButtonClicked()"></a>-->
            </div>
            <div class="list">
              <label class="item item-input item-select">
                <div class="input-label">
                  Vehicle Number
                </div>
                <select data-ng-model="vm.schedule.numFromVehicles" data-ng-change="vm.tabs.sch.events.updateMilage()" data-ng-options="p.num as p.vehicleNumber for p in vm.vehicles">
                  <select>
              </label>
              <label class="item item-input">
                <span class="input-label">Start (Miles)</span>
                <input type="text" class="transparent-background text-right" data-mobiscroll-numpad="{display: 'bottom',min:0,scale: 0,max:999999.99,preset:'decimal'}"
                  data-ng-model="vm.schedule.startMiles" data-ng-change="vm.tabs.sch.events.updateMilage()" />
              </label>
              <label class="item item-input">
                <span class="input-label">End</span>
                <input type="text" class="transparent-background text-right" data-mobiscroll-numpad="{display: 'bottom',min:0,scale: 0,max:999999.99,preset:'decimal'}"
                  data-ng-model="vm.schedule.endMiles" data-ng-change="vm.tabs.sch.events.updateMilage()" />
              </label>
              <label class="item item-input">
                <span class="input-label">
                  <strong>Total</strong>
                </span>
                <input type="text" readonly="" class="transparent-background text-right" data-ng-model="vm.schedule.totalMiles" />
              </label>
            </div>
          </div>
          <div class="card">
            <div class="item item-divider header-dark">
              OTHER SCHEDULES IN THIS WORK ORDER
            </div>
            <div class="padding-left padding-right">
              <button class="button button-block button-small button-positive" data-ng-click="vm.tabs.sch.events.onSchedulesListButtonClicked()">
                <i class="ion ion-plus"></i>&nbsp;Add New Schedule
              </button>
            </div>
            <ion-list>
              <ion-item class="item item-text-wrap text-center" data-ng-if="vm.barCodeData.schedules.length <= 1">
                <h3 class="text-muted">
                  <strong>No Other Schedules</strong>
                </h3>
              </ion-item>
              <ion-item class="item-text-wrap" data-ng-if="vm.barCodeData.schedules.length > 1" data-ng-repeat="sch in vm.barCodeData.schedules"
                data-ng-click="vm.tabs.sch.events.onListScheduleItemTap(sch)" data-ng-class="{'active':vm.schedule.num === sch.num}">
                <h4>
                  <span class="text-muted">Sch Date :</span>
                  <strong>{{::sch.scheduledStartDateTime | date:'MM/dd/yyyy'}}</strong>&nbsp;
                  <span class="text-muted" data-ng-if="sch.actualStartDateTime">Actual Date : </span>
                  <strong data-ng-if="sch.actualStartDateTime">
                    {{::sch.actualStartDateTime | date:'MM/dd/yyyy'}}
                  </strong>
                  <strong class="text-info">{{::sch.technicianName}}</strong>
                  <span data-ng-if="sch.tripNote">: Trip Note - {{::sch.tripNote}}</span>
                </h4>
              </ion-item>
            </ion-list>
          </div>
        </ion-content>
      </ion-tab>
      <ion-tab title="PRODUCTS" icon-on="ion-ios-list" icon-off="ion-ios-list-outline">
        <ion-content>
          <div class="card">
            <div class="item item-divider">
              PRODUCTS
              <button type="button" class="button pull-right button-small button-small button-positive" data-ng-click="vm.tabs.prod.events.onProdcutActionButtonClicked()">Add Product</a>
            </div>
            <div class="item item-text-wrap text-center" data-ng-if="vm.barCodeData.products.length == 0 && !vm.gettingBarcodeDetails">
              <h3 class="text-muted">
                <strong>No product found</strong>
              </h3>
            </div>
            <div data-ng-if="vm.barCodeData.products.length > 0 && !vm.gettingBarcodeDetails" data-ng-repeat="p in vm.barCodeData.products">
              <div class="row n-p-b n-m-b">
                <div class="col col-50">
                  <h5>{{::p.productName}}</h5>
                </div>
                <div class="col col-25">
                  <h5 class="pull-right">
                    <strong>{{p.qty}}</strong>
                  </h5>
                </div>
                <div class="col col-25 text-right">
                  <h5 class="pull-right" data-ng-if="vm.user.showPrice">
                    <strong>{{p.price | currency:'$':2}}</strong>
                  </h5>
                </div>
              </div>
              <div class="row n-p-t row-top border-bottom">
                <div class="col">
                  <small class="text-muted text-small">{{p.productDescription}}
                    <small>
                </div>
                <div class="col">
                  <button type="button" class="button icon ion-edit button-small text-energized" style="margin-top: -5px;float: left;" data-ng-if="!vm.isServiceProvider || sch.technicianNum == vm.userId"
                    ng-click="vm.tabs.prod.events.onEditProductClicked(p)"></button>
                  <button type="button" class="button icon ion-trash-b button-small text-assertive" style="margin-top: -5px;float: left;margin-left: 5px;"
                    ng-click="vm.tabs.prod.events.onDeleteProductClicked(p)"></button>
                </div>
              </div>
            </div>
          </div>
        </ion-content>
      </ion-tab>
      <ion-tab title="COMPONENTS" icon-on="ion-ios-cog" icon-off="ion-ios-cog-outline">
        <ion-content direction="y">
          <jobtype-list-component data-barcode="vm.barcode" data-jobtype="vm.barCodeData.barcodeDetails.excptns"></jobtype-list-component>
          <equipments-list-component data-ng-if="vm.uiSettings.showEquipmentTabControl" data-barcode="vm.barcode" uin="vm.barCodeData.barcodeDetails.uin"
            display-name="vm.barCodeData.barcodeDetails.displayName"></equipments-list-component>
          <expanse-expander-component ng-if="vm.uiSettings.expenseTrackingEnabled" data-barcode="vm.barcode"></expanse-expander-component>
        </ion-content>
      </ion-tab>
      <ion-tab title="SUMMARY" icon-on="ion-ios-calculator" icon-off="ion-ios-calculator-outline">
        <ion-content direction="y">
          <ion-list>
            <div class="card">
              <div class="item item-divider header-dark">
                <strong>INVOICE DETAILS</strong>
              </div>
              <div>
                <div class="list">
                  <div class="item item-stable">
                    <div class="row">
                      <div class="col col-50">Name</div>
                      <div class="col col-10" data-ng-if="vm.taxCheckboxVisibility">Tax</div>
                      <div class="col col-20 text-center">Qty</div>
                      <div class="col col-20">
                        <span class="pull-right">Total</span>
                      </div>
                    </div>
                  </div>
                  <div data-ng-repeat="inv in vm.barCodeData.invoice" class="item item-text-wrap">
                    <div class="row">
                      <div class="col col-50">
                        <h3>{{::inv.productName}}</h3>
                      </div>
                      <div class="col col-10" data-ng-if="vm.taxCheckboxVisibility">
                        <input type="checkbox" data-ng-model="inv.taxable" data-ng-change="vm.tabs.smry.events.onTaxCheckboaxChanged(inv)" />
                      </div>
                      <div class="col col-20 text-center">
                        <h3>{{inv.qty || 0}}</h3>
                      </div>
                      <div class="col col-20">
                        <h3 class="pull-right" data-ng-if="vm.user.showPrice">
                          <span data-ng-bind="inv.totalPrice | currency:'$':2"> </span>
                        </h3>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ion-list>
          <div class="row" data-ng-if="vm.user.showPrice">
            <div class="col">
              <p>
                <h5>Subtotal
                  <span class="pull-right">{{vm.totals.subtotal | currency:'$':2}}</span>
                </h5>
              </p>
              <p>
                <h5>Total Tax
                  <span class="pull-right text-muted">{{vm.totals.totaltax | currency:'$':2}}</span>
                </h5>
              </p>
              <p>
                <h5>Total Amount
                  <span class="pull-right text-energized">{{vm.totals.subtotal + vm.totals.totaltax | currency:'$':2}}</span>
                </h5>
              </p>
            </div>
          </div>
          <order-signature-component data-barcode="vm.barcode" is-estimate="false"></order-signature-component>
          <order-email-card-component data-barcode="vm.barcode" data-taxrate="vm.barCodeData.taxRate" data-default-emails="vm.barCodeData.barcodeDetails.address2_Group"
            show-price="vm.showPrice" hide-email-button="vm.uiSettings.hideEmailButton"></order-email-card-component>
          <order-images-list-component data-barcode="vm.barcode" is-estimate="false"></order-images-list-component>
          <order-documents-list-component data-barcode="vm.barcode"></order-documents-list-component>
          <div class="card">
            <div class="item item-divider header-dark">
              WORK STATUS
            </div>
            <div class="list">
              <div class="item item-input item-select">
                <div class="input-label">
                  Secondary Order Status
                </div>
                <select data-ng-model="vm.barCodeData.barcodeDetails.secondaryOrderStatus" data-ng-options="p.statusId as p.statusName for p in vm.scheduleStatus"
                  data-ng-change="vm.tabs.desc.events.onDescriptionOrResolutionChanged()">
                  <select>
              </div>
              <ion-toggle ng-model="vm.schedule.workComplete" toggle-class="toggle-balanced" data-ng-change="vm.tabs.sch.events.workCompleteChanged()">Work Complete</ion-toggle>
            </div>
          </div>
        </ion-content>
      </ion-tab>
    </ion-tabs>
  </ion-content>
</ion-view>
<script id="editProductModal.html" type="text/ng-template">
	<ion-modal-view>
		<edit-product-component is-estimate="false" data-modal-type="0" data-product="vm.currentProduct" 
    data-enable-markup-orders="vm.enableMarkup"></edit-product-component>
	</ion-modal-view>
</script>
<script id="fulltextModal.html" type="text/ng-template">
  <ion-modal-view>
    <ion-header-bar>
      <button type="button"  class="button button-small button-positive" data-ng-click="vm.tabs.events.updateClicked()">
              Update
            </button>
       <h1 class="title">
                {{vm.popModal.type}} 
            </h1>
            <button type="button" class="button button-small button-light" data-ng-click="vm.tabs.events.closePopoutModal()">
                Close
            </button>
    </ion-header-bar>
     <ion-content has-bouncing="true">
       <!--<div class="row">
          <div class="col">
            <button type="button"  class="button button-block button-small button-positive">
              Update
            </button>
          </div>
        </div>-->
        <div class="row">
          <div class="col">
            <textarea rows="30" auto-grow="" cols="5" style="width:100%;" 
            ng-model="vm.popModal.content"
            placeholder="{{vm.popModal.placeholder}}"></textarea>
          </div>
        </div>
       
     </ion-content>
  </ion-modal-view>
</script>
<script id="addProductModal.html" type="text/ng-template">
	<ion-modal-view>
		<edit-product-component is-estimate="false" data-modal-type="1" 
		data-product="vm.currentProduct" data-on-add-product-completed="vm.events.onAddProductCompleted(product)" 
    data-enable-markup-orders="vm.enableMarkup"></edit-product-component>
	</ion-modal-view>
</script>
<script id="workOrderMap.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar>
            <h1 class="title">
                {{::vm.barCodeData.barcodeDetails.barcodeName}} 
            </h1>
            <button type="button" class="button button-small button-light" data-ng-click="vm.tabs.desc.events.closeWorkOrderMapModal()">
                Close
            </button>
              </ion-header-bar>
              <ion-content>
                <div id="map" style="height:100%;width:100%;" data-tap-disabled="true"></div>
              </ion-content>
              </ion-modal-view>
              </script>